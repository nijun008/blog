{% extends 'layout.html' %}

{% block main %}
<ol class="breadcrumb">
  <li><a href="/admin">管理首页</a></li>
  <li><a href="/admin/user"><span>添加文章</span></a></li>
</ol>

<h3>添加文章</h3> 

<form method="POST" action="/admin/content/add">
  <div class="form-group">
    <label for="tag">文章分类</label>
    <select name="tag" id="tag" class="form-control">

      {% for tag in tags %}
      <option value="{{ tag._id.toString() }}">{{ tag.name }}</option>
      {% endfor %}

    </select>
  </div>
  <div class="form-group">
    <label for="title">文章标题</label>
    <input type="text" class="form-control" id="name" placeholder="请输入文章标题" name="title">
  </div>
  <div class="form-group">
    <label for="description">文章简介</label>
    <textarea class="form-control" id="description" name="description" rows="4"></textarea>
  </div>
  <div class="form-group">
    <label for="content">文章内容</label>
    <div id="editor">
      
    </div>
    <textarea id="content" name="content" class="form-control" rows="1" style="visibility: hidden; height:0">
    </textarea>
  </div>
  <button type="submit" class="btn btn-default" id="submit">添加</button>
</form>

{% endblock %}

{% block script %}
<script type="text/javascript" src="/public/js/wangEditor.min.js"></script>
<script type="text/javascript">
  var E = window.wangEditor
  var editor = new E('#editor')
  editor.create()
  $('#submit').on('click', function (e) {
    $('#content').val(editor.txt.html())
    return true
  })
</script>
{% endblock %}